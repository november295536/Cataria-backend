# 貓薄荷
網路上其實到處都有寫好的 blog 系統，如果單純只是想不依賴平台的創造一個屬於自己的空間，實在沒有必要這麼麻煩，所以我寫這個系統是有其他目標的，畢竟按照功能的完整性來講，我不可能做到像網路上的其他解決方案那樣完整，因為我沒有足夠的時間。貓薄荷專案有三個目標，按照時間排列如下:
- 短期目標: 藉此驗證自己在後端領域所學。
- 中期目標: 有一個可用的 blog 系統，讓我不用依賴平台。
- 長期目標: 做成一個教學專案，讓想學程式的人可以當成教材來使用。

之所以會想做成教學的專案，主要原因是我週遭好多人想要轉行當軟體工程師，雖然我不能算一個很厲害的工程師，但我也希望自己有能力可以幫助他們，可以說第三個目標才是激發我寫這個專案的契機，其他目標都是後來才慢慢浮現出來的。

## 版本控制
版本控制使用 Git + Github，沒有什麼特別的，主要講一下開發管理的策略。本專案主要分成兩個 branch 來進行維護，開發中以及最新的功能會放在 master branch 中，線上運行的則是 production branch 版本。因為目前為止沒有多人協作的問題，而且一次通常只專注於一件事情(一個新功能或重構)，所以開發工作會直接在 master 上進行，除非是有比較大的一個功能才會拆分出其他的分支。 

如果想看當前 production 分支運行的成果，可以直接參考我的部落格 https://blog.nov29.one 

## 後端 TODO
- [ ] 串接 AWS S3 作為圖片服務器。

  圖片存儲有很多種方法，第一個方案是存在 DB 裡面，第二個方案是存在伺服器之中，然後當成靜態資源存取，第三個是使用外部資源像是 AWS S3 等服務。

  第一個方案除非有特殊的需求，不然一般不會這樣做，因為 DB 是一個比 OS 的檔案系統操作成本更昂貴的系統，不管是圖片的存入還是訪問，都需要做額外的工作，而且這樣會加重 DB 的負擔。

  第二個方案的優勢在於我們有很多方案可以加速檔案系統的訪問，並且可以用 nginx 或其他類型的服務器來處理這些圖片的訪問。

  第三個方案是使用外部的儲存資源，當今網路服務時常會串接第三方服務這點來看，串接 AWS S3 可以是一個不錯的練習機會。考量到這個專案的教學目的，我決定串接外部服務當成圖片服務的實現方案。

- [ ] 實作文章分類列表(category、tag)相關的資料 API
- [ ] 重構管理員註冊及使用者管理模塊
- [ ] 輸入檢查

## 目錄結構
使用 Java Spring Boot 並不像前端使用 Nuxt 一樣有一個規範好的目錄結構，基本上都是自己來。

## RESTful API 定義
決定 API 的時候，我自己的作法是先思考我有哪些資源，並且需要支援那些操作，之後再根據這些資願把功能轉換為一系列的 API endpoint。
所以首先來看資源列表以及支援的操作:
```markdown
文章(資源)
  - 列舉所有文章
  - 取得某 category 所有文章
  - 取得某 tag 所有文章
  - 取得指定文章
  - 新增文章
  - 修改文章
  - 刪除文章
tag(資源)
  - 取得所有 tag
  - 取得該 tag 底下的所有文章
category(資源)
  - 取得所有 category
  - 取得該 category 底下的所有文章
圖片(資源)
  - 新增圖片
  - 取得圖片列表
  - 刪除圖片
認證
  - 取得 jwt token
  - 新增使用者
```

在確定能夠被使用者取得的資源之後，我們可以大致列出應該要有哪些 API。
### 普通用戶(未登入)
| method |              path              |      description                | 實現 |
| :----: | :----------------------------: | :-----------------------------: | :--: |
| GET    | /posts                         | 取得所有文章(含分頁功能)            | ✅  |
| GET    | /posts/category/{categoryName} | 取得分類目錄下所有文章(含分頁功能)    | ✅  |
| GET    | /posts/tags/{tagName}          | 取得分類標籤下所有文章(含分頁功能)    | ❌  |
| GET    | /posts/{id or slug}            | 透過文章 id 或 slug 取得指定文章    | ✅  |
| GET    | /pageInfo                      | 取得 category 和 tag 列表         | ❌  |

### 帳號管理
| method |              path              |      description                | 實現 |
| :----: | :----------------------------: | :-----------------------------: | :--: |
| POST   | /auth/login                    | 獲取登入 token                    | ✅  |
| POST   | /auth/signup                   | 註冊管理員帳號(暫時關閉)            | ✅  |

### 管理員功能
| method |              path              |      description                | 實現 |
| :----: | :----------------------------: | :-----------------------------: | :--: |
| GET    | /admin/posts                   | 取得所有文章(包含未發布文章)        | ✅  |
| POST   | /admin/posts                   | 新增文章                         | ✅  |
| PUT    | /admin/posts                   | 修改文章                         | ✅  |
| DELETE | /admin/posts                   | 刪除文章                         | ✅  |
| GET    | /admin/assets                  | 取得所有圖片                      | ❌  |
| POST   | /admin/assets                  | 新增圖片                         | ❌  |
| DELETE | /admin/assets                  | 刪除圖片                         | ❌  |
| GET    | /admin/categories              | 取得所有 category 的狀態          | ❌  |
| GET    | /admin/tags                    | 取得所有 tag 的狀態               | ❌  |

## 設計

## 部屬方式